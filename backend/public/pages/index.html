<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>í…œí”Œë¦¿ ëª©ë¡</title>
    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/combo.css" />
    <link rel="stylesheet" href="/css/register.css" />
  </head>
  <body>
    <nav class="gnb">
      <div class="logo">
        <img src="https://cdn.imweb.me/upload/S202212289feb50bbbee7e/136d3b8a07b8e.png" alt="ë¶„ì–‘ì˜ì‹  ë¡œê³ ">
      </div>
    </nav>
    <div id="wrap">
      <aside class="side-bar">
        <ul>
          <li>ğŸ“± ëª¨ë°”ì¼<span>ğŸš§ì œì‘ì¤‘</span></li>
          <li>ğŸ¥ ì•„íŠ¸ ë””ìì¸<span>ğŸš§ì œì‘ì¤‘</span></li>
          <li class="active">ğŸ–¥ï¸ PC</li>
          <li>ğŸ“‘ ì œì•ˆì„œ<span>ğŸš§ì œì‘ì¤‘</span></li>
        </ul>
      </aside>

      <div class="main-workspace">
        <div class="template-list">
          <nav class="nav">
            <!-- <a href="index.html" class="active">ğŸ“‚ PCí…œí”Œë¦¿ ëª©ë¡</a> -->
            <input type="text" placeholder="ğŸ” PCí…œí”Œë¦¿ ê²€ìƒ‰..." class="search-box">
            <button>ï¼‹</button>
          </nav>
          
          <div class="template-container-wrap">
            <!-- 1. ê¸°ì¡´ í…œí”Œë¦¿ ëª©ë¡ -->
            <div class="template-container">
              <div id="templateList">
                <p>ì•„ì§ êµ¬í˜„ ì „ì´ê±°ë‚˜, ë“±ë¡ëœ í…œí”Œë¦¿ì´ ì—†ìŠµë‹ˆë‹¤.</p>
              </div>
            </div>
          </div>
        </div>
        <!-- 2. í›„ë³´ ì´ë¯¸ì§€ -->
        <div class="candidate-container">
          <h2>í›„ë³´ ëª©ë¡</h2>
          <div id="candidateList"></div>
        </div>
        <!-- 3. ì¡°í•© ê³µê°„ -->
        <div class="combo-container">
          <div class="combo-header">
            <h2>ì¡°í•© ì˜ì—­</h2>
            <div class="tooltip">â„¹ï¸
              <span class="tooltip-text">
                1. í…œí”Œë¦¿ ì´ë¯¸ì§€ í´ë¦­<br />
                2. ë“œë˜ê·¸í•˜ì—¬ ìˆœì„œ ë³€ê²½
              </span>

              <label>
                <input type="checkbox" id="replaceMode">
                ë™ì¼ ì¹´í…Œê³ ë¦¬ ëŒ€ì²´ ëª¨ë“œ
              </label>
            </div>
            <span id="comboCount" class="combo-count">0ê°œ ì„ íƒ</span>
          </div>

          <div id="comboList" class="combo-list"></div>

          <button id="mergeBtn" type="button" style="margin-top: 16px">
            í•©ì„±
          </button>
        </div>
      </div>
    </div>
    <!-- END//id="wrap"-->

    <dialog id="popup-wrap">
      <div class="template-box">
        <button id="popup-wrap-close-btn">Ã—</button>

        <!-- í¼ -->
        <form id="templateForm" enctype="multipart/form-data">
          <h2>í…œí”Œë¦¿ ë“±ë¡</h2>

          <div class="row">
            <div class="label">ì œëª©</div>
            <input type="text" name="title" maxlength="40" /></input>
          </div>

          <div class="row">
            <div class="label">ë‚´ìš©</div>
            <textarea
              name="content"
              rows="3"
              maxlength="1000"
              class="fixed-textarea"
            ></textarea>
          </div>

          <div class="row">
            <div class="label cat-label">
              ì¹´í…Œê³ ë¦¬
              <button type="button" class="cat-add-btn" id="catAddBtn">
                ì¹´í…Œê³ ë¦¬ ì¶”ê°€
              </button>
              <div class="category-delete-wrap">
                <button type="button" class="cat-del-btn" id="catDelBtn">
                  ì¹´í…Œê³ ë¦¬ ì‚­ì œ
                </button>
                <div id="catDeleteList" class="cat-delete-list"></div>
              </div>
            </div>
            <div style="display: flex; gap: 10px">
              <select
                id="categorySelect"
                name="category"
                style="flex: 1"
              ></select>
            </div>
            <div id="catInputBox" style="display: none; margin-top: 8px">
              <input
                type="text"
                id="catInput"
                placeholder="ìƒˆ ì¹´í…Œê³ ë¦¬ ì…ë ¥"
                maxlength="15"
                style="flex: 1"
              />
              <button type="button" id="catInputOk" style="margin-left: 8px">
                ì¶”ê°€
              </button>
            </div>
          </div>

          <div class="row">
            <div class="label">íƒœê·¸ <span>(5ê°œë¡œ ì œí•œ)</span></div>
            <div class="tag-input-wrap">
              <input
                type="text"
                id="tagInput"
                placeholder="íƒœê·¸ ì…ë ¥ í›„ ì—”í„°"
                autocomplete="off"
                name="tagInput"
              />
              <div id="tagList" class="tag-list"></div>
            </div>
            <!-- ìˆ¨ê²¨ì§„ input, í¼ ì œì¶œ ì „ íƒœê·¸ ë°°ì—´ë¡œ ê°’ì„ ë„£ìŒ -->
            <input type="hidden" name="tags" id="hiddenTags" />
          </div>

          <div class="row">
            <div class="label">ì´ë¯¸ì§€</div>
            <div id="imgBox" class="img-upload">
              <span>+</span>
              <input
                type="file"
                name="image"
                accept="image/*"
                style="display: none"
              />
            </div>
          </div>
          <div id="imgPreview" class="img-preview-large"></div>

          <button type="submit">ë“±ë¡í•˜ê¸°</button>
        </form>
        <div id="result"></div>
      </div>
    </dialog>

    <!--í…œí”Œë¦¿ ì¶”ê°€ íŒì—… Jquery-->
    <script>
      // íŒì—… ì—´ê¸°
      document.querySelectorAll('.template-list .nav button').forEach(function(btn) {
        btn.addEventListener('click', function(e) {
          e.preventDefault(); // form ì•ˆì— ìˆì„ ê²½ìš° ëŒ€ë¹„
          document.querySelector('#popup-wrap').classList.add('open');
        });
      });

      // íŒì—… ë‹«ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ë‹«ê¸°
      document.querySelector('#popup-wrap-close-btn').addEventListener('click', function() {
        document.querySelector('#popup-wrap').classList.remove('open');
      });

      // ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸° (ë‚´ìš© ì˜ì—­ ì œì™¸)
      document.querySelector('#popup-wrap').addEventListener('click', function(e) {
        if (!e.target.closest('.template-box')) {
          this.classList.remove('open');
        }
      });

      // ESC í‚¤ ëˆŒë €ì„ ë•Œ ë‹«ê¸° (open í´ë˜ìŠ¤ê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ)
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          const popup = document.querySelector('#popup-wrap');
          if (popup.classList.contains('open')) {
            popup.classList.remove('open');
          }
        }
      });
    </script>

    <script>
    //í…œí”Œë¦¿ ë¦¬ìŠ¤íŠ¸ ê°€ë¡œìŠ¤í¬ë¡¤  
      const categorySection = document.querySelector('.category-section ul');

      categorySection.addEventListener('wheel', function(e) {
        // ì„¸ë¡œ ìŠ¤í¬ë¡¤ì„ ë§‰ê³ 
        e.preventDefault();
        // ê°€ë¡œë¡œ ì´ë™ì‹œí‚¤ê¸°
        categorySection.scrollLeft += e.deltaY;
      }, { passive: false });
    </script>

    <script src="/js/list.js"></script>
    <script src="/js/combo.js"></script>
    <script src="/js/register.js"></script>
  </body>
</html>
